^C
^C
^C
^C
^C
^C
^C
^C
^C
^C
^C
^C
^C
cd /mnt/cstore/cstore/store/AI-ArT/codeAI/iqtrain4 && python -m MetaMindIQTrain.clients.pygame.client -m
^C
cd /mnt/cstore/cstore/store/AI-ArT/codeAI/iqtrain4 && python -m MetaMindIQTrain.clients.pygame.client -h
^C
cd /mnt/cstore/cstore/store/AI-ArT/codeAI/iqtrain4 && grep -n "def render_expand_vision" -A 20 MetaMindIQTrain/clients/pygame/renderers/enhanced_generic_renderer.py.bak
^C
#!/usr/bin/env python3
"""
Enhanced Generic Module Renderer for the PyGame client.

This is a fully generic renderer that can display any training module
based solely on the state information provided by the server. It eliminates
the need for module-specific renderers by using a flexible component-based
approach to rendering.
"""

import pygame
import logging
import math
import os
from typing import Dict, Any, List, Tuple, Optional, Union, Callable
from abc import ABC, abstractmethod

# Try to import module colors from config
try:
    from MetaMindIQTrain.config import MODULE_COLORS
    HAS_MODULE_COLORS = True
except ImportError:
    HAS_MODULE_COLORS = False
    
# Handle imports properly whether run as module or directly
if __name__ == "__main__":
    # When run directly
    import sys
    import os
    from pathlib import Path
    
    # Add the project root to the path
    project_root = Path(__file__).resolve().parent.parent.parent.parent
    sys.path.insert(0, str(project_root))
    
    # Now import from the absolute path
    from base_renderer import BaseRenderer
else:
    # When imported as a module
    from .base_renderer import BaseRenderer

logger = logging.getLogger(__name__)

class EnhancedGenericRenderer(BaseRenderer):
    """Enhanced generic renderer for any module type."""
    
    def __init__(self, screen, module_id, config=None, colors=None, fonts=None, width=None, height=None):
        """Initialize the enhanced generic renderer.
        
        Args:
            screen: Pygame screen surface
            module_id: ID of the module to render
            config: Optional configuration dictionary
            colors: Optional color scheme dictionary
            fonts: Optional fonts dictionary
            width: Optional screen width (defaults to screen width)
            height: Optional screen height (defaults to screen height)
        """
        self.screen = screen
        self.module_id = module_id
        self.config = config or {}
        self.module_info = {}  # Will be populated by set_module_info
        
        # Set dimensions
        if width and height:
            self.width = width
            self.height = height
        else:
            self.width, self.height = screen.get_size()
            
        # Set default colors
        self.colors = colors or {
            'background': (20, 25, 35),  # Dark blue-black
            'text': (220, 220, 220),  # Off-white
            'text_secondary': (180, 180, 180),  # Light gray
            'highlight': (65, 105, 225),  # Royal blue
            'border': (50, 60, 80),  # Dark blue-gray
            'button': (40, 50, 70),  # Dark blue
            'button_hover': (60, 70, 100),  # Lighter blue
            'symbol': (100, 180, 255),  # Light blue
            'correct': (100, 200, 100),  # Green
            'error': (200, 80, 80),  # Red
        }
        
        # Set fonts
        self.fonts = fonts or {
            'small': pygame.font.Font(None, 20),
            'medium': pygame.font.Font(None, 28),
            'large': pygame.font.Font(None, 36),
            'title': pygame.font.Font(None, 48)
        }
        
        # Initialize module-specific attributes
        # Symbol Memory
        self.symbol_set = []
        self.current_symbol = None
        self.current_index = 0
        self.score = 0
        self.total_symbols = 0
        self.symbol_colors = {}
        self.feedback_message = None
        self.feedback_color = self.colors['text']
        
        # Morph Matrix
        self.matrix_grid = []
        self.matrix_size = 0
        self.selected_cell = None
        self.clusters = []
        self.cluster_colors = {}
        
        # Expand Vision
        self.vision_radius = 0
        self.numbers = {}
        self.number_colors = {}
        self.center_point = (self.width // 2, self.height // 2)
        
        # Common attributes
        self.level = 1
        self.timer = 0
        self.timer_max = 0
        self.paused = False
        
        # Apply module-specific colors
        self._apply_module_colors(module_id)
        
        logging.info(f"Enhanced generic renderer initialized for module: {module_id}")
        
        # Initialize buttons list
        self.buttons = []
        
        # Store module-specific colors
        self.module_colors = {}
        
        # Current active module
        self.active_module_id = None
    
    def set_active_module(self, module_id):
        """Set the active module ID and apply module-specific colors.
        
        Args:
            module_id: ID of the module to activate
        """
        # If same module, no need to change
        if self.active_module_id == module_id:
            return
            
        # Set new active module
        self.active_module_id = module_id
        
        # Apply module-specific colors if available
        if module_id in self.module_colors:
            self._apply_module_colors(module_id)
    
    def add_module_colors(self, module_id, colors):
        """Add module-specific colors to the renderer.
        
        Args:
            module_id: ID of the module
            colors: Dictionary of colors for the module
        """
        self.module_colors[module_id] = colors
    
    def set_layout(self, layout):
        """Set the layout information for the renderer.
        
        This method allows the renderer to use layout information provided by
        the server for consistent rendering across all modules.
        
        Args:
            layout (dict): Layout information for the module
                - components: List of UI components to render
                - theme: Theme information (colors, fonts, etc.)
                - layout: Layout information (positions, sizes, etc.)
        """
        self.layout = layout
        
        # Apply theme colors if provided
        if 'theme' in layout and 'colors' in layout['theme']:
            theme_colors = layout['theme']['colors']
            # Only update colors that are explicitly defined in the theme
            for color_key, color_value in theme_colors.items():
                self.colors[color_key] = color_value
            
            logging.debug(f"Applied {len(theme_colors)} theme colors from layout")
            
        # Store layout components for rendering
        if 'components' in layout:
            self.layout_components = layout['components']
            logging.debug(f"Stored {len(self.layout_components)} components from layout")
        
        logging.info(f"Set layout for {self.module_id}")
    
    def render(self, state):
        """Render the module based on its state.
        
        Args:
            state: Current module state
            
        Returns:
            List of interactive components
        """
        # Clear the screen with the background color
        self.screen.fill(self.colors['background'])
        
        # Set up layout if not already done
        if not self.layout:
            self._setup_layout()
        
        # Apply module-specific colors
        self._apply_module_colors(self.module_id)
        
        # Check if we have a specialized renderer for this module
        # These are optimized renderers for specific modules
        if self.module_id == 'expand_vision':
            return self.render_expand_vision(state)
        elif self.module_id == 'morph_matrix':
            return self.render_morph_matrix(state)
        elif self.module_id == 'symbol_memory':
            return self.render_symbol_memory(state)
            
        # If no specialized renderer, use the generic renderer
        # for any other module based on component system
        else:
            return self._render_generic(state)
    
    def _render_component(self, component_type, component):
        """Render a component based on its type.
        
        Args:
            component_type: Type of component to render
            component: Component data
        """
        # Map component types to rendering methods
        renderer_map = {
            'text': self._draw_text_component,
            'rectangle': self._draw_rectangle_component,
            'circle': self._draw_circle_component,
            'shape': self._draw_shape_component,
            'grid': self._draw_grid_component,
            'container': self._draw_container_component,
            'button': self._draw_button_component,
            'progress': self._draw_progress_component,
            'timer': self._draw_timer_component,
            'image': self._draw_image_component,
            'symbol': self._draw_symbol_component,
        }
        
        # Use appropriate renderer or log warning
        if component_type in renderer_map:
            renderer_map[component_type](component)
        else:
            logging.warning(f"Unknown component type: {component_type}")
    
    def _draw_text_component(self, component):
        """Draw a text component."""
        text = component.get('text', '')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        color_name = component.get('color', 'text')
        color = self._get_color(color_name)
        size = component.get('size', 'normal')
        centered = component.get('centered', True)
        
        # Select font based on size
        if size == 'large':
            font = self.fonts['large']
        elif size == 'small':
            font = self.fonts['small']
        else:  # 'normal'
            font = self.fonts['medium']
            
        self.draw_text(text, x, y, font, color, centered)
    
    def _draw_rectangle_component(self, component):
        """Draw a rectangle component."""
        rect = self._get_rect_from_component(component)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        
        if filled:
            pygame.draw.rect(self.screen, color, rect)
        else:
            pygame.draw.rect(self.screen, color, rect, border_width)
            
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, rect.centerx, rect.centery, self.fonts['medium'], text_color)
    
    def _draw_circle_component(self, component):
        """Draw a circle component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        radius = component.get('radius', 20)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        
        if filled:
            pygame.draw.circle(self.screen, color, (x, y), radius)
        else:
            pygame.draw.circle(self.screen, color, (x, y), radius, border_width)
            
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, x, y, self.fonts['medium'], text_color)
    
    def _draw_shape_component(self, component):
        """Draw a shape component."""
        shape_type = component.get('shape', 'rectangle')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        size = component.get('size', 30)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        rotation = component.get('rotation', 0)  # Rotation in degrees
        
        if shape_type == 'rectangle':
            width = component.get('width', size)
            height = component.get('height', size)
            rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
            
            if rotation == 0:
                # Simple case - no rotation
                if filled:
                    pygame.draw.rect(self.screen, color, rect)
                else:
                    pygame.draw.rect(self.screen, color, rect, border_width)
            else:
                # Create a surface, draw the rectangle, rotate, and blit
                shape_surf = pygame.Surface((width, height), pygame.SRCALPHA)
                if filled:
                    pygame.draw.rect(shape_surf, color, pygame.Rect(0, 0, width, height))
                else:
                    pygame.draw.rect(shape_surf, color, pygame.Rect(0, 0, width, height), border_width)
                
                rotated_surf = pygame.transform.rotate(shape_surf, rotation)
                rotated_rect = rotated_surf.get_rect(center=(x, y))
                self.screen.blit(rotated_surf, rotated_rect)
                
        elif shape_type == 'triangle':
            # Equilateral triangle
            points = [
                (x, y - size // 2),  # Top
                (x - size // 2, y + size // 2),  # Bottom left
                (x + size // 2, y + size // 2)   # Bottom right
            ]
            
            if rotation != 0:
                # Rotate points around center
                rad_rotation = math.radians(rotation)
                points = [
                    (
                        x + (px - x) * math.cos(rad_rotation) - (py - y) * math.sin(rad_rotation),
                        y + (px - x) * math.sin(rad_rotation) + (py - y) * math.cos(rad_rotation)
                    )
                    for px, py in points
                ]
            
            if filled:
                pygame.draw.polygon(self.screen, color, points)
            else:
                pygame.draw.polygon(self.screen, color, points, border_width)
                
        elif shape_type == 'circle':
            # Circle is already handled by _draw_circle_component, but included for completeness
            if filled:
                pygame.draw.circle(self.screen, color, (x, y), size // 2)
            else:
                pygame.draw.circle(self.screen, color, (x, y), size // 2, border_width)
                
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, x, y, self.fonts['medium'], text_color)
    
    def _draw_grid_component(self, component):
        """Draw a grid component."""
        grid = component.get('grid', [])
        if not grid:
            return
            
        rows = len(grid)
        cols = len(grid[0]) if rows > 0 else 0
        
        cell_width = component.get('cell_width', 40)
        cell_height = component.get('cell_height', 40)
        
        x = component.get('x', self.width // 2 - (cols * cell_width) // 2)
        y = component.get('y', self.height // 2 - (rows * cell_height) // 2)
        
        grid_width = cols * cell_width
        grid_height = rows * cell_height
        
        # Draw grid background
        grid_rect = pygame.Rect(x, y, grid_width, grid_height)
        pygame.draw.rect(self.screen, self.colors['grid_bg'], grid_rect)
        
        # Draw grid cells
        for row in range(rows):
            for col in range(cols):
                cell_rect = pygame.Rect(
                    x + col * cell_width,
                    y + row * cell_height,
                    cell_width,
                    cell_height
                )
                
                # Draw cell border
                pygame.draw.rect(self.screen, self.colors['grid_line'], cell_rect, 1)
                
                # Draw cell content if available
                if row < len(grid) and col < len(grid[row]):
                    cell = grid[row][col]
                    self._draw_grid_cell(cell, cell_rect)
    
    def _draw_grid_cell(self, cell, rect):
        """Draw the contents of a grid cell."""
        if cell is None:
            return
            
        if isinstance(cell, dict):
            # Complex cell with properties
            cell_type = cell.get('type', 'text')
            
            if cell_type == 'text':
                text = str(cell.get('text', ''))
                color_name = cell.get('color', 'text')
                color = self._get_color(color_name)
                self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], color)
                
            elif cell_type == 'color':
                color_name = cell.get('color', 'accent')
                color = self._get_color(color_name)
                
                # Draw a slightly smaller rectangle to show grid lines
                inner_rect = rect.inflate(-2, -2)
                pygame.draw.rect(self.screen, color, inner_rect)
                
                # Draw text if present
                if 'text' in cell:
                    text = str(cell['text'])
                    text_color_name = cell.get('text_color', 'text')
                    text_color = self._get_color(text_color_name)
                    self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], text_color)
                    
            elif cell_type == 'image':
                # Not implemented - would require image loading
                pass
                
            elif cell_type == 'shape':
                shape = cell.get('shape', 'rectangle')
                color_name = cell.get('color', 'accent')
                color = self._get_color(color_name)
                
                if shape == 'circle':
                    radius = min(rect.width, rect.height) // 2 - 2
                    pygame.draw.circle(self.screen, color, rect.center, radius)
                elif shape == 'rectangle':
                    inner_rect = rect.inflate(-4, -4)
                    pygame.draw.rect(self.screen, color, inner_rect)
                elif shape == 'triangle':
                    points = [
                        (rect.centerx, rect.top + 2),
                        (rect.left + 2, rect.bottom - 2),
                        (rect.right - 2, rect.bottom - 2)
                    ]
                    pygame.draw.polygon(self.screen, color, points)
                    
                # Draw text if present
                if 'text' in cell:
                    text = str(cell['text'])
                    text_color_name = cell.get('text_color', 'text')
                    text_color = self._get_color(text_color_name)
                    self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], text_color)
                    
            elif cell_type == 'covered':
                # Draw a covered/hidden cell
                pygame.draw.rect(self.screen, self.colors['covered'], rect.inflate(-2, -2))
                
        else:
            # Simple cell - just draw the value as text
            text = str(cell)
            self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'])
    
    def _draw_container_component(self, component):
        """Draw a container with child components."""
        # Get container properties
        x = component.get('x', 0)
        y = component.get('y', 0)
        width = component.get('width', self.width)
        height = component.get('height', self.height)
        
        # Draw container background if specified
        if 'background_color' in component:
            color_name = component.get('background_color')
            color = self._get_color(color_name)
            container_rect = pygame.Rect(x, y, width, height)
            pygame.draw.rect(self.screen, color, container_rect)
            
        # Draw container border if specified
        if 'border_color' in component:
            color_name = component.get('border_color')
            color = self._get_color(color_name)
            border_width = component.get('border_width', 1)
            container_rect = pygame.Rect(x, y, width, height)
            pygame.draw.rect(self.screen, color, container_rect, border_width)
        
        # Draw child components with adjusted positions
        for child in component.get('children', []):
            # Create a copy of the child with adjusted position
            child_copy = child.copy()
            child_copy['x'] = x + child.get('x', 0)
            child_copy['y'] = y + child.get('y', 0)
            self._draw_component(child_copy)
    
    def _draw_button_component(self, component):
        """Draw a button component."""
        text = component.get('text', 'Button')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 120)
        height = component.get('height', 40)
        action = component.get('action', 'button_click')
        hover = component.get('hover', False)
        
        # Create button rectangle
        button_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw the button using the base renderer's draw_button method
        self.draw_button(button_rect, text, action, hover)
    
    def _draw_progress_component(self, component):
        """Draw a progress bar component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 200)
        height = component.get('height', 20)
        progress = component.get('progress', 0.0)  # 0.0 to 1.0
        
        # Clamp progress to valid range
        progress = max(0.0, min(1.0, progress))
        
        # Create outer rectangle
        outer_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw background
        bg_color = self._get_color(component.get('background_color', 'button'))
        pygame.draw.rect(self.screen, bg_color, outer_rect)
        
        # Draw border
        border_color = self._get_color(component.get('border_color', 'text'))
        pygame.draw.rect(self.screen, border_color, outer_rect, 1)
        
        # Draw filled portion
        if progress > 0:
            fill_color = self._get_color(component.get('fill_color', 'accent'))
            fill_width = int(width * progress)
            fill_rect = pygame.Rect(x - width // 2, y - height // 2, fill_width, height)
            pygame.draw.rect(self.screen, fill_color, fill_rect)
        
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(text, x, y, self.fonts['small'], text_color)
        elif component.get('show_percentage', False):
            # Show percentage text
            percent_text = f"{int(progress * 100)}%"
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(percent_text, x, y, self.fonts['small'], text_color)
    
    def _draw_timer_component(self, component):
        """Draw a timer component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 200)
        height = component.get('height', 20)
        
        # Get timer values
        max_time = component.get('max_time', 60.0)  # Maximum time in seconds
        remaining_time = component.get('remaining_time', 0.0)  # Remaining time in seconds
        
        # Calculate progress (0.0 to 1.0)
        progress = remaining_time / max_time if max_time > 0 else 0.0
        progress = max(0.0, min(1.0, progress))  # Clamp to valid range
        
        # Create outer rectangle
        outer_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw background
        bg_color = self._get_color(component.get('background_color', 'button'))
        pygame.draw.rect(self.screen, bg_color, outer_rect)
        
        # Draw border
        border_color = self._get_color(component.get('border_color', 'text'))
        pygame.draw.rect(self.screen, border_color, outer_rect, 1)
        
        # Draw filled portion
        if progress > 0:
            # Choose color based on remaining time (green -> yellow -> red)
            if progress > 0.6:
                fill_color = self._get_color('correct')
            elif progress > 0.3:
                fill_color = self._get_color('yellow')
            else:
                fill_color = self._get_color('error')
                
            fill_width = int(width * progress)
            fill_rect = pygame.Rect(x - width // 2, y - height // 2, fill_width, height)
            pygame.draw.rect(self.screen, fill_color, fill_rect)
        
        # Draw time text
        if component.get('show_time', True):
            minutes = int(remaining_time) // 60
            seconds = int(remaining_time) % 60
            time_text = f"{minutes}:{seconds:02d}"
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(time_text, x, y, self.fonts['small'], text_color)
    
    def _draw_image_component(self, component):
        """Draw an image component (placeholder - actual implementation would require image loading)."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 100)
        height = component.get('height', 100)
        
        # Draw placeholder rectangle
        rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        pygame.draw.rect(self.screen, self.colors['button'], rect)
        pygame.draw.rect(self.screen, self.colors['text'], rect, 1)
        
        # Draw placeholder text
        self.draw_text("Image", x, y, self.fonts['small'])
        
        # Draw image source as small text if available
        if 'src' in component:
            src_text = component['src']
            if len(src_text) > 20:
                src_text = src_text[:17] + "..."
            self.draw_text(src_text, x, y + height // 2 - 10, self.fonts['small'])
    
    def _draw_symbol_component(self, component):
        """Draw a symbol component (specifically for symbol memory module).
        
        Args:
            component: Symbol component data
        """
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        symbol_type = component.get('symbol_type', 'circle')
        size = component.get('size', 40)
        color_index = component.get('color_index', 0)
        rotation = component.get('rotation', 0)
        is_target = component.get('is_target', False)
        hidden = component.get('hidden', False)
        
        # If we have symbol colors from module-specific settings, use them
        if hasattr(self, 'symbol_colors') and isinstance(self.symbol_colors, list):
            # Use modulo to ensure valid index even if out of range
            color_index = color_index % len(self.symbol_colors)
            color = self.symbol_colors[color_index]
        else:
            # Fallback to shape colors
            colors = list(self.shape_colors.values())
            color_index = color_index % len(colors)
            color = colors[color_index]
        
        # Draw different symbol based on type
        if hidden:
            # Draw a placeholder or hidden symbol
            pygame.draw.rect(
                self.screen, 
                self.colors['grid_bg'], 
                pygame.Rect(x - size // 2, y - size // 2, size, size)
            )
            return
            
        # Draw highlight for target symbols
        if is_target:
            # Draw a subtle highlight behind the symbol
            highlight_color = self.colors.get('highlight')
            if hasattr(self, 'correct_highlight'):
                highlight_color = self.correct_highlight
            # Semi-transparent circle for highlight
            highlight_surface = pygame.Surface((size * 1.5, size * 1.5), pygame.SRCALPHA)
            pygame.draw.circle(
                highlight_surface,
                (*highlight_color[:3], 100),  # Add alpha for semi-transparency
                (size * 1.5 // 2, size * 1.5 // 2), 
                size * 1.5 // 2
            )
            self.screen.blit(
                highlight_surface, 
                (x - size * 1.5 // 2, y - size * 1.5 // 2)
            )
        
        # Create a surface for the rotated shape
        shape_surface = pygame.Surface((size, size), pygame.SRCALPHA)
        
        if symbol_type == 'circle':
            pygame.draw.circle(
                shape_surface, 
                color, 
                (size // 2, size // 2), 
                size // 2 - 2
            )
        elif symbol_type == 'square':
            pygame.draw.rect(
                shape_surface, 
                color, 
                pygame.Rect(2, 2, size - 4, size - 4)
            )
        elif symbol_type == 'triangle':
            points = [
                (size // 2, 2),
                (2, size - 2),
                (size - 2, size - 2)
            ]
            pygame.draw.polygon(shape_surface, color, points)
        elif symbol_type == 'star':
            # Draw a simple star
            points = []
            num_points = 5
            for i in range(num_points * 2):
                angle = math.pi * 2 * i / (num_points * 2)
                radius = size // 2 - 2 if i % 2 == 0 else size // 4
                x_point = size // 2 + radius * math.sin(angle)
                y_point = size // 2 + radius * math.cos(angle)
                points.append((x_point, y_point))
            pygame.draw.polygon(shape_surface, color, points)
        elif symbol_type == 'diamond':
            points = [
                (size // 2, 2),
                (size - 2, size // 2),
                (size // 2, size - 2),
                (2, size // 2)
            ]
            pygame.draw.polygon(shape_surface, color, points)
        else:
            # Default to circle if unknown shape
            pygame.draw.circle(
                shape_surface, 
                color, 
                (size // 2, size // 2), 
                size // 2 - 2
            )
        
        # Rotate the shape if needed
        if rotation != 0:
            shape_surface = pygame.transform.rotate(shape_surface, rotation)
        
        # Draw the shape
        shape_rect = shape_surface.get_rect(center=(x, y))
        self.screen.blit(shape_surface, shape_rect)
        
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color = component.get('text_color', self.colors['text'])
            self.draw_text(text, x, y, self.fonts['small'], text_color)
    
    def _get_rect_from_component(self, component):
        """Extract a pygame.Rect from component properties."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 100)
        height = component.get('height', 50)
        
        # Handle different position modes
        position_mode = component.get('position_mode', 'center')
        
        if position_mode == 'center':
            return pygame.Rect(x - width // 2, y - height // 2, width, height)
        elif position_mode == 'topleft':
            return pygame.Rect(x, y, width, height)
        else:
            return pygame.Rect(x - width // 2, y - height // 2, width, height)
    
    def _get_color(self, color_name):
        """Get a color by name."""
        if not color_name:
            return self.colors['text']
            
        # Check if it's a shape color
        if color_name in self.shape_colors:
            return self.shape_colors[color_name]
            
        # Check if it's a standard color
        if color_name in self.colors:
            return self.colors[color_name]
            
        # Check if it's a hex color
        if color_name.startswith('#') and len(color_name) in (4, 7):
            try:
                if len(color_name) == 4:
                    # Convert #RGB to #RRGGBB
                    r = int(color_name[1] + color_name[1], 16)
                    g = int(color_name[2] + color_name[2], 16)
                    b = int(color_name[3] + color_name[3], 16)
                    return (r, g, b)
                else:
                    # #RRGGBB format
                    r = int(color_name[1:3], 16)
                    g = int(color_name[3:5], 16)
                    b = int(color_name[5:7], 16)
                    return (r, g, b)
            except ValueError:
                pass
                
        # Check if it's an RGB tuple string like "(255, 0, 0)"
        if color_name.startswith('(') and color_name.endswith(')'):
            try:
                # Extract numbers from the string
                rgb = [int(x.strip()) for x in color_name[1:-1].split(',')]
                if len(rgb) >= 3:
                    return tuple(rgb[:3])
            except ValueError:
                pass
                
        # Default to text color
        return self.colors['text']
    
    def _get_color_with_alpha(self, color_name, alpha=128):
        """Get a color with alpha transparency."""
        color = self._get_color(color_name)
        
        # If color already has alpha, use it
        if len(color) > 3:
            return color
            
        # Add alpha component
        return color + (alpha,)
    
    def draw_text(self, text, x, y, font=None, color=None, centered=True):
        """Draw text on the screen.
        
        Args:
            text: Text to draw
            x: X coordinate
            y: Y coordinate
            font: Font to use (default: regular_font)
            color: Text color (default: text color)
            centered: Whether to center the text at the given coordinates
        """
        if font is None:
            font = self.fonts['medium']
        
        if color is None:
            color = self.colors['text']
            
        text_surface = font.render(str(text), True, color)
        
        if centered:
            text_rect = text_surface.get_rect(center=(x, y))
        else:
            text_rect = text_surface.get_rect(topleft=(x, y))
            
        self.screen.blit(text_surface, text_rect)
        
    def draw_button(self, rect, text, action=None, hover=False):
        """Draw a button and add it to the buttons list.
        
        Args:
            rect: Button rectangle
            text: Button text
            action: Action to perform when clicked
            hover: Whether the button is being hovered over
        """
        # Draw button background
        color = self.colors['button_hover'] if hover else self.colors['button']
        pygame.draw.rect(self.screen, color, rect)
        pygame.draw.rect(self.screen, self.colors['text'], rect, 2)  # Border
        
        # Draw button text
        text_surface = self.fonts['medium'].render(text, True, self.colors['button_text'])
        text_rect = text_surface.get_rect(center=rect.center)
        self.screen.blit(text_surface, text_rect)
        
        # Add to buttons list if not already there
        button_exists = False
        for button in self.buttons:
            if button['rect'] == rect and button['action'] == action:
                button_exists = True
                button['hover'] = hover
                break
                
        if not button_exists and action is not None:
            self.buttons.append({
                'rect': rect,
                'action': action,
                'hover': hover
            }) 
    
    def _apply_module_colors(self, module_id):
        """Apply module-specific colors based on the module ID.
        
        Args:
            module_id: ID of the module to apply colors for
        """
        # Check if we already have stored colors for this module
        if hasattr(self, f"{module_id}_colors") and getattr(self, f"{module_id}_colors"):
            # Use stored module-specific colors
            module_colors = getattr(self, f"{module_id}_colors")
            self.colors.update(module_colors)
            logging.debug(f"Applied stored colors for module: {module_id}")
            return
            
        # Check if we have module-specific colors in the config
        if self.config and 'module_colors' in self.config and module_id in self.config['module_colors']:
            # Use config-defined module colors
            module_colors = self.config['module_colors'][module_id]
            self.colors.update(module_colors)
            logging.debug(f"Applied config colors for module: {module_id}")
            return
            
        # Apply default module-specific colors
        if module_id == 'symbol_memory':
            self._apply_symbol_memory_colors()
        elif module_id == 'morph_matrix':
            self._apply_morph_matrix_colors()
        elif module_id == 'expand_vision':
            self._apply_expand_vision_colors()
        else:
            # Apply generic default colors
            default_colors = self._get_default_module_colors(module_id)
            self.colors.update(default_colors)
            logging.debug(f"Applied default colors for unknown module: {module_id}")
            
    def _get_default_module_colors(self, module_id):
        """Get default color scheme for a module.
        
        Args:
            module_id: ID of the module to get colors for
            
        Returns:
            dict: Default color scheme for the module
        """
        # Common dark theme base colors
        base_colors = {
            'background': (20, 25, 35),  # Dark blue-black
            'text': (220, 220, 220),  # Off-white
            'text_secondary': (180, 180, 180),  # Light gray
            'highlight': (65, 105, 225),  # Royal blue
            'border': (50, 60, 80),  # Dark blue-gray
            'button': (40, 50, 70),  # Dark blue
            'button_hover': (60, 70, 100),  # Lighter blue
            'button_text': (220, 220, 220),  # Off-white
            'success': (100, 200, 100),  # Green
            'error': (200, 80, 80),  # Red
            'warning': (240, 180, 60),  # Orange
            'accent': (65, 105, 225),  # Royal blue
        }
        
        return base_colors
        
    def _apply_symbol_memory_colors(self):
        """Apply color scheme specific to Symbol Memory module."""
        symbol_colors = {
            'symbol': (100, 180, 255),  # Bright blue for symbols
            'correct': (100, 200, 100),  # Green for correct answers
            'incorrect': (200, 80, 80),  # Red for incorrect answers
            'neutral': (180, 180, 180),  # Gray for neutral states
            'highlight': (255, 200, 100),  # Orange-gold for highlights
            'grid_bg': (30, 35, 45),  # Slightly lighter than background
            'grid_line': (60, 70, 90),  # Medium blue-gray for grid lines
        }
        
        # Update the colors dictionary
        self.colors.update(symbol_colors)
        
        # Store these colors for future reference
        self.symbol_memory_colors = symbol_colors
        
    def _apply_morph_matrix_colors(self):
        """Apply color scheme specific to Morph Matrix module."""
        matrix_colors = {
            'grid_bg': (25, 30, 40),  # Dark background for grid
            'grid_line': (50, 60, 80),  # Medium blue for grid lines
            'cell_selected': (100, 130, 200),  # Highlighted blue for selected cell
            'cell_active': (80, 100, 150),  # Active cell
            'cell_inactive': (40, 50, 70),  # Inactive cell
            'cluster_1': (120, 180, 240),  # Blue cluster
            'cluster_2': (240, 130, 100),  # Orange cluster
            'cluster_3': (140, 210, 140),  # Green cluster
            'cluster_4': (230, 180, 100),  # Yellow cluster
            'cluster_5': (200, 130, 200),  # Purple cluster
        }
        
        # Update the colors dictionary
        self.colors.update(matrix_colors)
        
        # Store these colors for future reference
        self.morph_matrix_colors = matrix_colors
        
    def _apply_expand_vision_colors(self):
        """Apply color scheme specific to Expand Vision module."""
        vision_colors = {
            'vision_bg': (15, 20, 30),  # Darker background for better contrast
            'vision_circle': (50, 70, 120),  # Blue circle
            'vision_radius': (80, 100, 180, 100),  # Semi-transparent blue
            'number_default': (220, 220, 220),  # White numbers
            'number_highlight': (255, 200, 100),  # Highlighted numbers
            'number_correct': (100, 200, 100),  # Correct numbers
            'number_incorrect': (200, 80, 80),  # Incorrect numbers
            'target_number': (255, 180, 80),  # Target number in orange
            'focus_point': (255, 0, 0),  # Red focus point
        }
        
        # Update the colors dictionary
        self.colors.update(vision_colors)
        
        # Store these colors for future reference
        self.expand_vision_colors = vision_colors
    
    def set_module_info(self, module_info):
        """Set the module information for the renderer.
        
        Args:
            module_info (dict): Dictionary containing module information
                - id: Module ID
                - name: Module display name
                - description: Module description
                - options: Module specific options
        """
        self.module_info = module_info
        self.module_id = module_info.get('id', self.module_id)
        
        # Apply module-specific colors
        self._apply_module_colors(self.module_id)
        
        # Log that we've set the module info
        logging.info(f"Set module info for {self.module_id}: {module_info.get('name', 'unknown')}")
    
    def _merge_layout_with_state(self, layout_components, state):
        """Merge layout components with state data.
        
        This method combines the static layout information with dynamic
        state data to create the final components for rendering.
        
        Args:
            layout_components: List of component layouts
            state: Current module state
            
        Returns:
            List of components with state data applied
        """
        merged_components = []
        state_data = state.get('data', {})
        
        for layout_component in layout_components:
            # Create a copy of the layout component
            component = layout_component.copy()
            
            # If this component has a data_key, update it with state data
            if 'data_key' in component and component['data_key'] in state_data:
                data_key = component['data_key']
                
                # If the data is a simple value, update the text property
                if not isinstance(state_data[data_key], dict):
                    component['text'] = str(state_data[data_key])
                else:
                    # Merge the data dictionary into the component
                    component.update(state_data[data_key])
            
            # Handle children recursively
            if 'children' in component and component['children']:
                component['children'] = self._merge_layout_with_state(
                    component['children'], 
                    state
                )
                
            merged_components.append(component)
            
        return merged_components 

    def _draw_message(self, message, y_pos):
        """Draw a message text.
        
        Args:
            message: Text message to display
            y_pos: Y position for the message
        """
        self.draw_text(message, self.width // 2, y_pos, self.fonts['medium'])
    
    def _draw_score_and_level(self, score, level):
        """Draw score and level information.
        
        Args:
            score: Current score to display
            level: Current level to display
        """
        # Draw score in the top left corner
        score_text = f"Score: {score}"
        score_surface = self.fonts['medium'].render(score_text, True, self.colors['text'])
        self.screen.blit(score_surface, (20, 20))
        
        # Draw level in the top right corner
        level_text = f"Level: {level}"
        level_surface = self.fonts['medium'].render(level_text, True, self.colors['text'])
        level_rect = level_surface.get_rect()
        level_rect.topright = (self.width - 20, 20)
        self.screen.blit(level_surface, level_rect)
    
    def render_expand_vision(self, state):
        """Specialized rendering for the Expand Vision module using component-based approach.
        
        Args:
            state: Current module state
        """
        # Apply Expand Vision specific colors
        if not hasattr(self, 'expand_vision_colors'):
            self._apply_expand_vision_colors()
            
        # Get content area dimensions
        content_width = self.layout['content_rect'].width
        content_height = self.layout['content_rect'].height
        center_x = self.layout['content_rect'].centerx
        center_y = self.layout['content_rect'].centery
        
        # Extract state information
        circle_width = state.get('circle_width', 30)
        circle_height = state.get('circle_height', 30)
        numbers = state.get('numbers', [])
        show_numbers = state.get('show_numbers', False)
        phase = state.get('phase', 'preparation')
        distance_factor_x = state.get('distance_factor_x', 0.15)
        distance_factor_y = state.get('distance_factor_y', 0.15)
        
        # Component list for rendering
        components = []
        
        # Create base components
        components.extend([
            # Background
            {
                'type': 'rect',
                'position': [center_x, center_y],
                'width': content_width,
                'height': content_height,
                'color': 'vision_bg',
                'fill': True
            },
            # Phase message
            {
                'type': 'text',
                'position': [center_x, center_y - content_height * 0.3],
                'text': state.get('phase_message', 'Focus on the center'),
                'color': 'text',
                'font_size': 24,
                'align': 'center'
            },
            # Expanding circle
            {
                'type': 'circle',
                'position': [center_x, center_y],
                'radius': min(circle_width, circle_height) // 2,
                'color': 'vision_circle',
                'fill': True
            },
            # Focus point
            {
                'type': 'circle',
                'position': [center_x, center_y],
                'radius': 3,
                'color': 'focus_point',
                'fill': True
            }
        ])
        
        # Add central word if applicable
        current_word = state.get('current_word', '')
        if current_word and phase == 'preparation':
            components.append({
                'type': 'text',
                'position': [center_x, center_y],
                'text': current_word,
                'color': 'text',
                'font_size': 18,
                'align': 'center'
            })
        
        # Add numbers if in active phase and showing numbers
        if phase == 'active' and show_numbers and numbers:
            # Calculate dynamic positions based on distance factors
            distance_x = distance_factor_x * content_width
            distance_y = distance_factor_y * content_height
            
            # Positions for the four numbers (top, right, bottom, left)
            positions = [
                [center_x, center_y - distance_y],  # Top
                [center_x + distance_x, center_y],  # Right
                [center_x, center_y + distance_y],  # Bottom
                [center_x - distance_x, center_y]   # Left
            ]
            
            # Add number components
            for i, num in enumerate(numbers):
                if i < len(positions):
                    components.append({
                        'type': 'text',
                        'position': positions[i],
                        'text': str(num),
                        'color': 'number_default',
                        'font_size': 28,
                        'align': 'center'
                    })
        
        # Render each component
        self._render_components(components)
        
        # Render UI chrome (header, footer)
        self._render_ui_chrome(state)
        
        # Return the components for potential interaction handling
        return components

    def render_morph_matrix(self, state):
        # Implementation of render_morph_matrix method
        pass

    def render_symbol_memory(self, state):
        # Implementation of render_symbol_memory method
        pass

    def _render_generic(self, state):
        # Implementation of _render_generic method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_ui_chrome(self, state):
        # Implementation of _render_ui_chrome method
        pass

    def _render_components(self, components):
        # Implementation of _render_components method
        pass

    def _render_components(self, components):
#!/usr/bin/env python3
"""
Enhanced Generic Module Renderer for the PyGame client.

This is a fully generic renderer that can display any training module
based solely on the state information provided by the server. It eliminates
the need for module-specific renderers by using a flexible component-based
approach to rendering.
"""

import pygame
import logging
import math
import os
from typing import Dict, Any, List, Tuple, Optional, Union, Callable
from abc import ABC, abstractmethod

# Try to import module colors from config
try:
    from MetaMindIQTrain.config import MODULE_COLORS
    HAS_MODULE_COLORS = True
except ImportError:
    HAS_MODULE_COLORS = False
    
# Handle imports properly whether run as module or directly
if __name__ == "__main__":
    # When run directly
    import sys
    import os
    from pathlib import Path
    
    # Add the project root to the path
    project_root = Path(__file__).resolve().parent.parent.parent.parent
    sys.path.insert(0, str(project_root))
    
    # Now import from the absolute path
    from base_renderer import BaseRenderer
else:
    # When imported as a module
    from .base_renderer import BaseRenderer

logger = logging.getLogger(__name__)

class EnhancedGenericRenderer(BaseRenderer):
    """Enhanced generic renderer for any module type."""
    
    def __init__(self, screen, module_id, config=None, colors=None, fonts=None, width=None, height=None):
        """Initialize the enhanced generic renderer.
        
        Args:
            screen: Pygame screen surface
            module_id: ID of the module to render
            config: Optional configuration dictionary
            colors: Optional color scheme dictionary
            fonts: Optional fonts dictionary
            width: Optional screen width (defaults to screen width)
            height: Optional screen height (defaults to screen height)
        """
        self.screen = screen
        self.module_id = module_id
        self.config = config or {}
        self.module_info = {}  # Will be populated by set_module_info
        
        # Set dimensions
        if width and height:
            self.width = width
            self.height = height
        else:
            self.width, self.height = screen.get_size()
            
        # Set default colors
        self.colors = colors or {
            'background': (20, 25, 35),  # Dark blue-black
            'text': (220, 220, 220),  # Off-white
            'text_secondary': (180, 180, 180),  # Light gray
            'highlight': (65, 105, 225),  # Royal blue
            'border': (50, 60, 80),  # Dark blue-gray
            'button': (40, 50, 70),  # Dark blue
            'button_hover': (60, 70, 100),  # Lighter blue
            'symbol': (100, 180, 255),  # Light blue
            'correct': (100, 200, 100),  # Green
            'error': (200, 80, 80),  # Red
        }
        
        # Set fonts
        self.fonts = fonts or {
            'small': pygame.font.Font(None, 20),
            'medium': pygame.font.Font(None, 28),
            'large': pygame.font.Font(None, 36),
            'title': pygame.font.Font(None, 48)
        }
        
        # Initialize module-specific attributes
        # Symbol Memory
        self.symbol_set = []
        self.current_symbol = None
        self.current_index = 0
        self.score = 0
        self.total_symbols = 0
        self.symbol_colors = {}
        self.feedback_message = None
        self.feedback_color = self.colors['text']
        
        # Morph Matrix
        self.matrix_grid = []
        self.matrix_size = 0
        self.selected_cell = None
        self.clusters = []
        self.cluster_colors = {}
        
        # Expand Vision
        self.vision_radius = 0
        self.numbers = {}
        self.number_colors = {}
        self.center_point = (self.width // 2, self.height // 2)
        
        # Common attributes
        self.level = 1
        self.timer = 0
        self.timer_max = 0
        self.paused = False
        
        # Apply module-specific colors
        self._apply_module_colors(module_id)
        
        logging.info(f"Enhanced generic renderer initialized for module: {module_id}")
        
        # Initialize buttons list
        self.buttons = []
        
        # Store module-specific colors
        self.module_colors = {}
        
        # Current active module
        self.active_module_id = None
    
    def set_active_module(self, module_id):
        """Set the active module ID and apply module-specific colors.
        
        Args:
            module_id: ID of the module to activate
        """
        # If same module, no need to change
        if self.active_module_id == module_id:
            return
            
        # Set new active module
        self.active_module_id = module_id
        
        # Apply module-specific colors if available
        if module_id in self.module_colors:
            self._apply_module_colors(module_id)
    
    def add_module_colors(self, module_id, colors):
        """Add module-specific colors to the renderer.
        
        Args:
            module_id: ID of the module
            colors: Dictionary of colors for the module
        """
        self.module_colors[module_id] = colors
    
    def set_layout(self, layout):
        """Set the layout information for the renderer.
        
        This method allows the renderer to use layout information provided by
        the server for consistent rendering across all modules.
        
        Args:
            layout (dict): Layout information for the module
                - components: List of UI components to render
                - theme: Theme information (colors, fonts, etc.)
                - layout: Layout information (positions, sizes, etc.)
        """
        self.layout = layout
        
        # Apply theme colors if provided
        if 'theme' in layout and 'colors' in layout['theme']:
            theme_colors = layout['theme']['colors']
            # Only update colors that are explicitly defined in the theme
            for color_key, color_value in theme_colors.items():
                self.colors[color_key] = color_value
            
            logging.debug(f"Applied {len(theme_colors)} theme colors from layout")
            
        # Store layout components for rendering
        if 'components' in layout:
            self.layout_components = layout['components']
            logging.debug(f"Stored {len(self.layout_components)} components from layout")
        
        logging.info(f"Set layout for {self.module_id}")
    
    def render(self, state):
        """Render the module state.
        
        Args:
            state: Module state to render
        """
        if not state:
            return
        
        # Get module ID from state if available
        module_id = state.get('module_id', '')
        
        # Set active module and apply module-specific colors
        if module_id and module_id != self.active_module_id:
            self.set_active_module(module_id)
        
        # Extract metadata from state
        metadata = state.get('metadata', {})
        score = metadata.get('score', 0)
        level = metadata.get('level', 1)
        message = metadata.get('message', '')
        
        # Clear screen with background color
        self.screen.fill(self.colors['background'])
        
        # Draw title if available
        title = state.get('title', metadata.get('title', ''))
        if title:
            title_y = 30
            self.draw_text(title, self.width // 2, title_y, self.fonts['title'])
        
        # Use layout components if available, otherwise use state components
        components = []
        if hasattr(self, 'layout_components') and self.layout_components:
            # Use layout components with state data
            components = self._merge_layout_with_state(self.layout_components, state)
        else:
            # Use components directly from state
            components = state.get('components', [])
            
        # Draw all components
        for component in components:
            component_type = component.get('type', '')
            self._render_component(component_type, component)
        
        # Draw score and level if available
        if score or level:
            self._draw_score_and_level(score, level)
        
        # Draw message if available
        if message:
            message_y = self.height - 50
            self._draw_message(message, message_y)
    
    def _render_component(self, component_type, component):
        """Render a component based on its type.
        
        Args:
            component_type: Type of component to render
            component: Component data
        """
        # Map component types to rendering methods
        renderer_map = {
            'text': self._draw_text_component,
            'rectangle': self._draw_rectangle_component,
            'circle': self._draw_circle_component,
            'shape': self._draw_shape_component,
            'grid': self._draw_grid_component,
            'container': self._draw_container_component,
            'button': self._draw_button_component,
            'progress': self._draw_progress_component,
            'timer': self._draw_timer_component,
            'image': self._draw_image_component,
            'symbol': self._draw_symbol_component,
        }
        
        # Use appropriate renderer or log warning
        if component_type in renderer_map:
            renderer_map[component_type](component)
        else:
            logging.warning(f"Unknown component type: {component_type}")
    
    def _draw_text_component(self, component):
        """Draw a text component."""
        text = component.get('text', '')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        color_name = component.get('color', 'text')
        color = self._get_color(color_name)
        size = component.get('size', 'normal')
        centered = component.get('centered', True)
        
        # Select font based on size
        if size == 'large':
            font = self.fonts['large']
        elif size == 'small':
            font = self.fonts['small']
        else:  # 'normal'
            font = self.fonts['medium']
            
        self.draw_text(text, x, y, font, color, centered)
    
    def _draw_rectangle_component(self, component):
        """Draw a rectangle component."""
        rect = self._get_rect_from_component(component)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        
        if filled:
            pygame.draw.rect(self.screen, color, rect)
        else:
            pygame.draw.rect(self.screen, color, rect, border_width)
            
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, rect.centerx, rect.centery, self.fonts['medium'], text_color)
    
    def _draw_circle_component(self, component):
        """Draw a circle component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        radius = component.get('radius', 20)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        
        if filled:
            pygame.draw.circle(self.screen, color, (x, y), radius)
        else:
            pygame.draw.circle(self.screen, color, (x, y), radius, border_width)
            
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, x, y, self.fonts['medium'], text_color)
    
    def _draw_shape_component(self, component):
        """Draw a shape component."""
        shape_type = component.get('shape', 'rectangle')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        size = component.get('size', 30)
        color_name = component.get('color', 'accent')
        color = self._get_color(color_name)
        filled = component.get('filled', True)
        border_width = component.get('border_width', 1)
        rotation = component.get('rotation', 0)  # Rotation in degrees
        
        if shape_type == 'rectangle':
            width = component.get('width', size)
            height = component.get('height', size)
            rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
            
            if rotation == 0:
                # Simple case - no rotation
                if filled:
                    pygame.draw.rect(self.screen, color, rect)
                else:
                    pygame.draw.rect(self.screen, color, rect, border_width)
            else:
                # Create a surface, draw the rectangle, rotate, and blit
                shape_surf = pygame.Surface((width, height), pygame.SRCALPHA)
                if filled:
                    pygame.draw.rect(shape_surf, color, pygame.Rect(0, 0, width, height))
                else:
                    pygame.draw.rect(shape_surf, color, pygame.Rect(0, 0, width, height), border_width)
                
                rotated_surf = pygame.transform.rotate(shape_surf, rotation)
                rotated_rect = rotated_surf.get_rect(center=(x, y))
                self.screen.blit(rotated_surf, rotated_rect)
                
        elif shape_type == 'triangle':
            # Equilateral triangle
            points = [
                (x, y - size // 2),  # Top
                (x - size // 2, y + size // 2),  # Bottom left
                (x + size // 2, y + size // 2)   # Bottom right
            ]
            
            if rotation != 0:
                # Rotate points around center
                rad_rotation = math.radians(rotation)
                points = [
                    (
                        x + (px - x) * math.cos(rad_rotation) - (py - y) * math.sin(rad_rotation),
                        y + (px - x) * math.sin(rad_rotation) + (py - y) * math.cos(rad_rotation)
                    )
                    for px, py in points
                ]
            
            if filled:
                pygame.draw.polygon(self.screen, color, points)
            else:
                pygame.draw.polygon(self.screen, color, points, border_width)
                
        elif shape_type == 'circle':
            # Circle is already handled by _draw_circle_component, but included for completeness
            if filled:
                pygame.draw.circle(self.screen, color, (x, y), size // 2)
            else:
                pygame.draw.circle(self.screen, color, (x, y), size // 2, border_width)
                
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color_name = component.get('text_color', 'text')
            text_color = self._get_color(text_color_name)
            self.draw_text(text, x, y, self.fonts['medium'], text_color)
    
    def _draw_grid_component(self, component):
        """Draw a grid component."""
        grid = component.get('grid', [])
        if not grid:
            return
            
        rows = len(grid)
        cols = len(grid[0]) if rows > 0 else 0
        
        cell_width = component.get('cell_width', 40)
        cell_height = component.get('cell_height', 40)
        
        x = component.get('x', self.width // 2 - (cols * cell_width) // 2)
        y = component.get('y', self.height // 2 - (rows * cell_height) // 2)
        
        grid_width = cols * cell_width
        grid_height = rows * cell_height
        
        # Draw grid background
        grid_rect = pygame.Rect(x, y, grid_width, grid_height)
        pygame.draw.rect(self.screen, self.colors['grid_bg'], grid_rect)
        
        # Draw grid cells
        for row in range(rows):
            for col in range(cols):
                cell_rect = pygame.Rect(
                    x + col * cell_width,
                    y + row * cell_height,
                    cell_width,
                    cell_height
                )
                
                # Draw cell border
                pygame.draw.rect(self.screen, self.colors['grid_line'], cell_rect, 1)
                
                # Draw cell content if available
                if row < len(grid) and col < len(grid[row]):
                    cell = grid[row][col]
                    self._draw_grid_cell(cell, cell_rect)
    
    def _draw_grid_cell(self, cell, rect):
        """Draw the contents of a grid cell."""
        if cell is None:
            return
            
        if isinstance(cell, dict):
            # Complex cell with properties
            cell_type = cell.get('type', 'text')
            
            if cell_type == 'text':
                text = str(cell.get('text', ''))
                color_name = cell.get('color', 'text')
                color = self._get_color(color_name)
                self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], color)
                
            elif cell_type == 'color':
                color_name = cell.get('color', 'accent')
                color = self._get_color(color_name)
                
                # Draw a slightly smaller rectangle to show grid lines
                inner_rect = rect.inflate(-2, -2)
                pygame.draw.rect(self.screen, color, inner_rect)
                
                # Draw text if present
                if 'text' in cell:
                    text = str(cell['text'])
                    text_color_name = cell.get('text_color', 'text')
                    text_color = self._get_color(text_color_name)
                    self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], text_color)
                    
            elif cell_type == 'image':
                # Not implemented - would require image loading
                pass
                
            elif cell_type == 'shape':
                shape = cell.get('shape', 'rectangle')
                color_name = cell.get('color', 'accent')
                color = self._get_color(color_name)
                
                if shape == 'circle':
                    radius = min(rect.width, rect.height) // 2 - 2
                    pygame.draw.circle(self.screen, color, rect.center, radius)
                elif shape == 'rectangle':
                    inner_rect = rect.inflate(-4, -4)
                    pygame.draw.rect(self.screen, color, inner_rect)
                elif shape == 'triangle':
                    points = [
                        (rect.centerx, rect.top + 2),
                        (rect.left + 2, rect.bottom - 2),
                        (rect.right - 2, rect.bottom - 2)
                    ]
                    pygame.draw.polygon(self.screen, color, points)
                    
                # Draw text if present
                if 'text' in cell:
                    text = str(cell['text'])
                    text_color_name = cell.get('text_color', 'text')
                    text_color = self._get_color(text_color_name)
                    self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'], text_color)
                    
            elif cell_type == 'covered':
                # Draw a covered/hidden cell
                pygame.draw.rect(self.screen, self.colors['covered'], rect.inflate(-2, -2))
                
        else:
            # Simple cell - just draw the value as text
            text = str(cell)
            self.draw_text(text, rect.centerx, rect.centery, self.fonts['small'])
    
    def _draw_container_component(self, component):
        """Draw a container with child components."""
        # Get container properties
        x = component.get('x', 0)
        y = component.get('y', 0)
        width = component.get('width', self.width)
        height = component.get('height', self.height)
        
        # Draw container background if specified
        if 'background_color' in component:
            color_name = component.get('background_color')
            color = self._get_color(color_name)
            container_rect = pygame.Rect(x, y, width, height)
            pygame.draw.rect(self.screen, color, container_rect)
            
        # Draw container border if specified
        if 'border_color' in component:
            color_name = component.get('border_color')
            color = self._get_color(color_name)
            border_width = component.get('border_width', 1)
            container_rect = pygame.Rect(x, y, width, height)
            pygame.draw.rect(self.screen, color, container_rect, border_width)
        
        # Draw child components with adjusted positions
        for child in component.get('children', []):
            # Create a copy of the child with adjusted position
            child_copy = child.copy()
            child_copy['x'] = x + child.get('x', 0)
            child_copy['y'] = y + child.get('y', 0)
            self._draw_component(child_copy)
    
    def _draw_button_component(self, component):
        """Draw a button component."""
        text = component.get('text', 'Button')
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 120)
        height = component.get('height', 40)
        action = component.get('action', 'button_click')
        hover = component.get('hover', False)
        
        # Create button rectangle
        button_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw the button using the base renderer's draw_button method
        self.draw_button(button_rect, text, action, hover)
    
    def _draw_progress_component(self, component):
        """Draw a progress bar component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 200)
        height = component.get('height', 20)
        progress = component.get('progress', 0.0)  # 0.0 to 1.0
        
        # Clamp progress to valid range
        progress = max(0.0, min(1.0, progress))
        
        # Create outer rectangle
        outer_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw background
        bg_color = self._get_color(component.get('background_color', 'button'))
        pygame.draw.rect(self.screen, bg_color, outer_rect)
        
        # Draw border
        border_color = self._get_color(component.get('border_color', 'text'))
        pygame.draw.rect(self.screen, border_color, outer_rect, 1)
        
        # Draw filled portion
        if progress > 0:
            fill_color = self._get_color(component.get('fill_color', 'accent'))
            fill_width = int(width * progress)
            fill_rect = pygame.Rect(x - width // 2, y - height // 2, fill_width, height)
            pygame.draw.rect(self.screen, fill_color, fill_rect)
        
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(text, x, y, self.fonts['small'], text_color)
        elif component.get('show_percentage', False):
            # Show percentage text
            percent_text = f"{int(progress * 100)}%"
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(percent_text, x, y, self.fonts['small'], text_color)
    
    def _draw_timer_component(self, component):
        """Draw a timer component."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 200)
        height = component.get('height', 20)
        
        # Get timer values
        max_time = component.get('max_time', 60.0)  # Maximum time in seconds
        remaining_time = component.get('remaining_time', 0.0)  # Remaining time in seconds
        
        # Calculate progress (0.0 to 1.0)
        progress = remaining_time / max_time if max_time > 0 else 0.0
        progress = max(0.0, min(1.0, progress))  # Clamp to valid range
        
        # Create outer rectangle
        outer_rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        
        # Draw background
        bg_color = self._get_color(component.get('background_color', 'button'))
        pygame.draw.rect(self.screen, bg_color, outer_rect)
        
        # Draw border
        border_color = self._get_color(component.get('border_color', 'text'))
        pygame.draw.rect(self.screen, border_color, outer_rect, 1)
        
        # Draw filled portion
        if progress > 0:
            # Choose color based on remaining time (green -> yellow -> red)
            if progress > 0.6:
                fill_color = self._get_color('correct')
            elif progress > 0.3:
                fill_color = self._get_color('yellow')
            else:
                fill_color = self._get_color('error')
                
            fill_width = int(width * progress)
            fill_rect = pygame.Rect(x - width // 2, y - height // 2, fill_width, height)
            pygame.draw.rect(self.screen, fill_color, fill_rect)
        
        # Draw time text
        if component.get('show_time', True):
            minutes = int(remaining_time) // 60
            seconds = int(remaining_time) % 60
            time_text = f"{minutes}:{seconds:02d}"
            text_color = self._get_color(component.get('text_color', 'text'))
            self.draw_text(time_text, x, y, self.fonts['small'], text_color)
    
    def _draw_image_component(self, component):
        """Draw an image component (placeholder - actual implementation would require image loading)."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 100)
        height = component.get('height', 100)
        
        # Draw placeholder rectangle
        rect = pygame.Rect(x - width // 2, y - height // 2, width, height)
        pygame.draw.rect(self.screen, self.colors['button'], rect)
        pygame.draw.rect(self.screen, self.colors['text'], rect, 1)
        
        # Draw placeholder text
        self.draw_text("Image", x, y, self.fonts['small'])
        
        # Draw image source as small text if available
        if 'src' in component:
            src_text = component['src']
            if len(src_text) > 20:
                src_text = src_text[:17] + "..."
            self.draw_text(src_text, x, y + height // 2 - 10, self.fonts['small'])
    
    def _draw_symbol_component(self, component):
        """Draw a symbol component (specifically for symbol memory module).
        
        Args:
            component: Symbol component data
        """
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        symbol_type = component.get('symbol_type', 'circle')
        size = component.get('size', 40)
        color_index = component.get('color_index', 0)
        rotation = component.get('rotation', 0)
        is_target = component.get('is_target', False)
        hidden = component.get('hidden', False)
        
        # If we have symbol colors from module-specific settings, use them
        if hasattr(self, 'symbol_colors') and isinstance(self.symbol_colors, list):
            # Use modulo to ensure valid index even if out of range
            color_index = color_index % len(self.symbol_colors)
            color = self.symbol_colors[color_index]
        else:
            # Fallback to shape colors
            colors = list(self.shape_colors.values())
            color_index = color_index % len(colors)
            color = colors[color_index]
        
        # Draw different symbol based on type
        if hidden:
            # Draw a placeholder or hidden symbol
            pygame.draw.rect(
                self.screen, 
                self.colors['grid_bg'], 
                pygame.Rect(x - size // 2, y - size // 2, size, size)
            )
            return
            
        # Draw highlight for target symbols
        if is_target:
            # Draw a subtle highlight behind the symbol
            highlight_color = self.colors.get('highlight')
            if hasattr(self, 'correct_highlight'):
                highlight_color = self.correct_highlight
            # Semi-transparent circle for highlight
            highlight_surface = pygame.Surface((size * 1.5, size * 1.5), pygame.SRCALPHA)
            pygame.draw.circle(
                highlight_surface,
                (*highlight_color[:3], 100),  # Add alpha for semi-transparency
                (size * 1.5 // 2, size * 1.5 // 2), 
                size * 1.5 // 2
            )
            self.screen.blit(
                highlight_surface, 
                (x - size * 1.5 // 2, y - size * 1.5 // 2)
            )
        
        # Create a surface for the rotated shape
        shape_surface = pygame.Surface((size, size), pygame.SRCALPHA)
        
        if symbol_type == 'circle':
            pygame.draw.circle(
                shape_surface, 
                color, 
                (size // 2, size // 2), 
                size // 2 - 2
            )
        elif symbol_type == 'square':
            pygame.draw.rect(
                shape_surface, 
                color, 
                pygame.Rect(2, 2, size - 4, size - 4)
            )
        elif symbol_type == 'triangle':
            points = [
                (size // 2, 2),
                (2, size - 2),
                (size - 2, size - 2)
            ]
            pygame.draw.polygon(shape_surface, color, points)
        elif symbol_type == 'star':
            # Draw a simple star
            points = []
            num_points = 5
            for i in range(num_points * 2):
                angle = math.pi * 2 * i / (num_points * 2)
                radius = size // 2 - 2 if i % 2 == 0 else size // 4
                x_point = size // 2 + radius * math.sin(angle)
                y_point = size // 2 + radius * math.cos(angle)
                points.append((x_point, y_point))
            pygame.draw.polygon(shape_surface, color, points)
        elif symbol_type == 'diamond':
            points = [
                (size // 2, 2),
                (size - 2, size // 2),
                (size // 2, size - 2),
                (2, size // 2)
            ]
            pygame.draw.polygon(shape_surface, color, points)
        else:
            # Default to circle if unknown shape
            pygame.draw.circle(
                shape_surface, 
                color, 
                (size // 2, size // 2), 
                size // 2 - 2
            )
        
        # Rotate the shape if needed
        if rotation != 0:
            shape_surface = pygame.transform.rotate(shape_surface, rotation)
        
        # Draw the shape
        shape_rect = shape_surface.get_rect(center=(x, y))
        self.screen.blit(shape_surface, shape_rect)
        
        # Draw text if present
        if 'text' in component:
            text = component['text']
            text_color = component.get('text_color', self.colors['text'])
            self.draw_text(text, x, y, self.fonts['small'], text_color)
    
    def _get_rect_from_component(self, component):
        """Extract a pygame.Rect from component properties."""
        x = component.get('x', self.width // 2)
        y = component.get('y', self.height // 2)
        width = component.get('width', 100)
        height = component.get('height', 50)
        
        # Handle different position modes
        position_mode = component.get('position_mode', 'center')
        
        if position_mode == 'center':
            return pygame.Rect(x - width // 2, y - height // 2, width, height)
        elif position_mode == 'topleft':
            return pygame.Rect(x, y, width, height)
        else:
            return pygame.Rect(x - width // 2, y - height // 2, width, height)
    
    def _get_color(self, color_name):
        """Get a color by name."""
        if not color_name:
            return self.colors['text']
            
        # Check if it's a shape color
        if color_name in self.shape_colors:
            return self.shape_colors[color_name]
            
        # Check if it's a standard color
        if color_name in self.colors:
            return self.colors[color_name]
            
        # Check if it's a hex color
        if color_name.startswith('#') and len(color_name) in (4, 7):
            try:
                if len(color_name) == 4:
                    # Convert #RGB to #RRGGBB
                    r = int(color_name[1] + color_name[1], 16)
                    g = int(color_name[2] + color_name[2], 16)
                    b = int(color_name[3] + color_name[3], 16)
                    return (r, g, b)
                else:
                    # #RRGGBB format
                    r = int(color_name[1:3], 16)
                    g = int(color_name[3:5], 16)
                    b = int(color_name[5:7], 16)
                    return (r, g, b)
            except ValueError:
                pass
                
        # Check if it's an RGB tuple string like "(255, 0, 0)"
        if color_name.startswith('(') and color_name.endswith(')'):
            try:
                # Extract numbers from the string
                rgb = [int(x.strip()) for x in color_name[1:-1].split(',')]
                if len(rgb) >= 3:
                    return tuple(rgb[:3])
            except ValueError:
                pass
                
        # Default to text color
        return self.colors['text']
    
    def _get_color_with_alpha(self, color_name, alpha=128):
        """Get a color with alpha transparency."""
        color = self._get_color(color_name)
        
        # If color already has alpha, use it
        if len(color) > 3:
            return color
            
        # Add alpha component
        return color + (alpha,)
    
    def draw_text(self, text, x, y, font=None, color=None, centered=True):
        """Draw text on the screen.
        
        Args:
            text: Text to draw
            x: X coordinate
            y: Y coordinate
            font: Font to use (default: regular_font)
            color: Text color (default: text color)
            centered: Whether to center the text at the given coordinates
        """
        if font is None:
            font = self.fonts['medium']
        
        if color is None:
            color = self.colors['text']
            
        text_surface = font.render(str(text), True, color)
        
        if centered:
            text_rect = text_surface.get_rect(center=(x, y))
        else:
            text_rect = text_surface.get_rect(topleft=(x, y))
            
        self.screen.blit(text_surface, text_rect)
        
    def draw_button(self, rect, text, action=None, hover=False):
        """Draw a button and add it to the buttons list.
        
        Args:
            rect: Button rectangle
            text: Button text
            action: Action to perform when clicked
            hover: Whether the button is being hovered over
        """
        # Draw button background
        color = self.colors['button_hover'] if hover else self.colors['button']
        pygame.draw.rect(self.screen, color, rect)
        pygame.draw.rect(self.screen, self.colors['text'], rect, 2)  # Border
        
        # Draw button text
        text_surface = self.fonts['medium'].render(text, True, self.colors['button_text'])
        text_rect = text_surface.get_rect(center=rect.center)
        self.screen.blit(text_surface, text_rect)
        
        # Add to buttons list if not already there
        button_exists = False
        for button in self.buttons:
            if button['rect'] == rect and button['action'] == action:
                button_exists = True
                button['hover'] = hover
                break
                
        if not button_exists and action is not None:
            self.buttons.append({
                'rect': rect,
                'action': action,
                'hover': hover
            }) 
    
    def _apply_module_colors(self, module_id):
        """Apply module-specific colors based on the module ID.
        
        Args:
            module_id: ID of the module to apply colors for
        """
        # Check if we already have stored colors for this module
        if hasattr(self, f"{module_id}_colors") and getattr(self, f"{module_id}_colors"):
            # Use stored module-specific colors
            module_colors = getattr(self, f"{module_id}_colors")
            self.colors.update(module_colors)
            logging.debug(f"Applied stored colors for module: {module_id}")
            return
            
        # Check if we have module-specific colors in the config
        if self.config and 'module_colors' in self.config and module_id in self.config['module_colors']:
            # Use config-defined module colors
            module_colors = self.config['module_colors'][module_id]
            self.colors.update(module_colors)
            logging.debug(f"Applied config colors for module: {module_id}")
            return
            
        # Apply default module-specific colors
        if module_id == 'symbol_memory':
            self._apply_symbol_memory_colors()
        elif module_id == 'morph_matrix':
            self._apply_morph_matrix_colors()
        elif module_id == 'expand_vision':
            self._apply_expand_vision_colors()
        else:
            # Apply generic default colors
            default_colors = self._get_default_module_colors(module_id)
            self.colors.update(default_colors)
            logging.debug(f"Applied default colors for unknown module: {module_id}")
            
    def _get_default_module_colors(self, module_id):
        """Get default color scheme for a module.
        
        Args:
            module_id: ID of the module to get colors for
            
        Returns:
            dict: Default color scheme for the module
        """
        # Common dark theme base colors
        base_colors = {
            'background': (20, 25, 35),  # Dark blue-black
            'text': (220, 220, 220),  # Off-white
            'text_secondary': (180, 180, 180),  # Light gray
            'highlight': (65, 105, 225),  # Royal blue
            'border': (50, 60, 80),  # Dark blue-gray
            'button': (40, 50, 70),  # Dark blue
            'button_hover': (60, 70, 100),  # Lighter blue
            'button_text': (220, 220, 220),  # Off-white
            'success': (100, 200, 100),  # Green
            'error': (200, 80, 80),  # Red
            'warning': (240, 180, 60),  # Orange
            'accent': (65, 105, 225),  # Royal blue
        }
        
        return base_colors
        
    def _apply_symbol_memory_colors(self):
        """Apply color scheme specific to Symbol Memory module."""
        symbol_colors = {
            'symbol': (100, 180, 255),  # Bright blue for symbols
            'correct': (100, 200, 100),  # Green for correct answers
            'incorrect': (200, 80, 80),  # Red for incorrect answers
            'neutral': (180, 180, 180),  # Gray for neutral states
            'highlight': (255, 200, 100),  # Orange-gold for highlights
            'grid_bg': (30, 35, 45),  # Slightly lighter than background
            'grid_line': (60, 70, 90),  # Medium blue-gray for grid lines
        }
        
        # Update the colors dictionary
        self.colors.update(symbol_colors)
        
        # Store these colors for future reference
        self.symbol_memory_colors = symbol_colors
        
    def _apply_morph_matrix_colors(self):
        """Apply color scheme specific to Morph Matrix module."""
        matrix_colors = {
            'grid_bg': (25, 30, 40),  # Dark background for grid
            'grid_line': (50, 60, 80),  # Medium blue for grid lines
            'cell_selected': (100, 130, 200),  # Highlighted blue for selected cell
            'cell_active': (80, 100, 150),  # Active cell
            'cell_inactive': (40, 50, 70),  # Inactive cell
            'cluster_1': (120, 180, 240),  # Blue cluster
            'cluster_2': (240, 130, 100),  # Orange cluster
            'cluster_3': (140, 210, 140),  # Green cluster
            'cluster_4': (230, 180, 100),  # Yellow cluster
            'cluster_5': (200, 130, 200),  # Purple cluster
        }
        
        # Update the colors dictionary
        self.colors.update(matrix_colors)
        
        # Store these colors for future reference
        self.morph_matrix_colors = matrix_colors
        
    def _apply_expand_vision_colors(self):
        """Apply color scheme specific to Expand Vision module."""
        vision_colors = {
            'vision_bg': (15, 20, 30),  # Darker background for better contrast
            'vision_circle': (50, 70, 120),  # Blue circle
            'vision_radius': (80, 100, 180, 100),  # Semi-transparent blue
            'number_default': (220, 220, 220),  # White numbers
            'number_highlight': (255, 200, 100),  # Highlighted numbers
            'number_correct': (100, 200, 100),  # Correct numbers
            'number_incorrect': (200, 80, 80),  # Incorrect numbers
            'target_number': (255, 180, 80),  # Target number in orange
        }
        
        # Update the colors dictionary
        self.colors.update(vision_colors)
        
        # Store these colors for future reference
        self.expand_vision_colors = vision_colors
    
    def set_module_info(self, module_info):
        """Set the module information for the renderer.
        
        Args:
            module_info (dict): Dictionary containing module information
                - id: Module ID
                - name: Module display name
                - description: Module description
                - options: Module specific options
        """
        self.module_info = module_info
        self.module_id = module_info.get('id', self.module_id)
        
        # Apply module-specific colors
        self._apply_module_colors(self.module_id)
        
        # Log that we've set the module info
        logging.info(f"Set module info for {self.module_id}: {module_info.get('name', 'unknown')}")
    
    def _merge_layout_with_state(self, layout_components, state):
        """Merge layout components with state data.
        
        This method combines the static layout information with dynamic
        state data to create the final components for rendering.
        
        Args:
            layout_components: List of component layouts
            state: Current module state
            
        Returns:
            List of components with state data applied
        """
        merged_components = []
        state_data = state.get('data', {})
        
        for layout_component in layout_components:
            # Create a copy of the layout component
            component = layout_component.copy()
            
            # If this component has a data_key, update it with state data
            if 'data_key' in component and component['data_key'] in state_data:
                data_key = component['data_key']
                
                # If the data is a simple value, update the text property
                if not isinstance(state_data[data_key], dict):
                    component['text'] = str(state_data[data_key])
                else:
                    # Merge the data dictionary into the component
                    component.update(state_data[data_key])
            
            # Handle children recursively
            if 'children' in component and component['children']:
                component['children'] = self._merge_layout_with_state(
                    component['children'], 
                    state
                )
                
            merged_components.append(component)
            
        return merged_components 

    def _draw_message(self, message, y_pos):
        """Draw a message text.
        
        Args:
            message: Text message to display
            y_pos: Y position for the message
        """
        self.draw_text(message, self.width // 2, y_pos, self.fonts['medium'])
    
    def _draw_score_and_level(self, score, level):
        """Draw score and level information.
        
        Args:
            score: Current score to display
            level: Current level to display
        """
        # Draw score in the top left corner
        score_text = f"Score: {score}"
        score_surface = self.fonts['medium'].render(score_text, True, self.colors['text'])
        self.screen.blit(score_surface, (20, 20))
        
        # Draw level in the top right corner
        level_text = f"Level: {level}"
        level_surface = self.fonts['medium'].render(level_text, True, self.colors['text'])
        level_rect = level_surface.get_rect()
        level_rect.topright = (self.width - 20, 20)
        self.screen.blit(level_surface, level_rect) 
